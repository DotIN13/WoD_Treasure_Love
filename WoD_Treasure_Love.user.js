// ==UserScript==
// @name         WoD Treasure Love
// @namespace    https://www.wannaexpresso.com/
// @version      0.4
// @description  Make love with WoD Treasure!
// @author       DotIN13
// @match        http://canto.world-of-dungeons.org/wod/spiel/hero/itemlinklist.php*
// @match        http://canto.world-of-dungeons.org/wod/spiel/hero/items.php*
// @require      https://unpkg.com/string-similarity/umd/string-similarity.min.js
// @grant        none
// ==/UserScript==

(function() {
    'use strict';

    // binary<-->hex ///////////////////////////////////////////////////////////

    function binaryToHex(s) {
        var i, k, part, accum, ret = '';
        for (i = s.length-1; i >= 3; i -= 4) {
            // extract out in substrings of 4 and convert to hex
            part = s.substr(i+1-4, 4);
            accum = 0;
            for (k = 0; k < 4; k += 1) {
                if (part[k] !== '0' && part[k] !== '1') {
                    // invalid character
                    return { valid: false };
                }
                // compute the length 4 substring
                accum = accum * 2 + parseInt(part[k], 10);
            }
            if (accum >= 10) {
                // 'A' to 'F'
                ret = String.fromCharCode(accum - 10 + 'A'.charCodeAt(0)) + ret;
            } else {
                // '0' to '9'
                ret = String(accum) + ret;
            }
        }
        // remaining characters, i = 0, 1, or 2
        if (i >= 0) {
            accum = 0;
            // convert from front
            for (k = 0; k <= i; k += 1) {
                if (s[k] !== '0' && s[k] !== '1') {
                    return { valid: false };
                }
                accum = accum * 2 + parseInt(s[k], 10);
            }
            // 3 bits, value cannot exceed 2^3 - 1 = 7, just convert
            ret = String(accum) + ret;
        }
        return { valid: true, result: ret };
    }

    function hexToBinary(s) {
        var i, k, part, ret = '';
        // lookup table for easier conversion. '0' characters are padded for '1' to '7'
        var lookupTable = {
            '0': '0000', '1': '0001', '2': '0010', '3': '0011', '4': '0100',
            '5': '0101', '6': '0110', '7': '0111', '8': '1000', '9': '1001',
            'a': '1010', 'b': '1011', 'c': '1100', 'd': '1101',
            'e': '1110', 'f': '1111',
            'A': '1010', 'B': '1011', 'C': '1100', 'D': '1101',
            'E': '1110', 'F': '1111'
        };
        for (i = 0; i < s.length; i += 1) {
            if (lookupTable.hasOwnProperty(s[i])) {
                ret += lookupTable[s[i]];
            } else {
                return { valid: false };
            }
        }
        return { valid: true, result: ret };
    }

    // unique setlist ////////////////////////////////////////////////////////

    var setlist = ["刀锋之翼",
                   "戈隆·贾索的钢环护臂",
                   "混沌之刃",
                   "巴德霍德-兄与弟",
                   "歧刃杖",
                   "精制刃矛",
                   "投戟",
                   "黑刺",
                   "飞凌角矛",
                   "投矛器",
                   "卡·拉加尔的“热情”",
                   "仙普洛石碟",
                   "杜尼克斯托圆盘",
                   "乌尼果的命运头盔",
                   "乌尼果的优质皮制腰带",
                   "乌尼果的魔法返回箭",
                   "古老守护者盔甲",
                   "古老守护者披肩",
                   "古老守护者护腕",
                   "古老守护者护手",
                   "古老守护者护腿",
                   "古老守护者之靴",
                   "斑斓冰花",
                   "白瓷面具",
                   "冰舞女的云袖",
                   "冰玫瑰之鞭",
                   "冰舞女的丝裙",
                   "冰球破片",
                   "旅馆主人的围裙",
                   "大啤酒杯",
                   "一套小木杯",
                   "藤木壶",
                   "塔罗牌",
                   "塔娜拉的头巾",
                   "塔娜拉的护身符",
                   "塔娜拉双射弓",
                   "伊洛因•晨露的魔化塔娜拉双射弓",
                   "塔娜拉给新手英雄的指南",
                   "塔娜拉的黑暗手段之书",
                   "羽毛头饰",
                   "寒鹰羽毛",
                   "彩虹鹤羽毛",
                   "橙羽鹤羽毛",
                   "雄鹰之眼",
                   "奇尔可的绒毛",
                   "大块羽毛精萃",
                   "梅菲迪斯智慧环",
                   "莉莉丹宝石手套",
                   "宝石共鸣器",
                   "莉莉丹特制泰迪熊",
                   "莉莉丹宝石剑",
                   "莉莉丹宝石杖",
                   "宝石魔法综述",
                   "棕色注魔水晶",
                   "蓝色注魔水晶",
                   "红色注魔水晶",
                   "黑色注魔水晶",
                   "青色注魔水晶",
                   "白色注魔水晶",
                   "黄色注魔水晶",
                   "紫色注魔水晶",
                   "风暴之皇权十字球",
                   "祈祷书",
                   "圣者遗物",
                   "神圣头骨",
                   "高阶祭司阿鲁·伊达神庙的墙碎块",
                   "半遮面纱",
                   "缎带舞者薄衫",
                   "萨茜拉的轻纱",
                   "白色丝绸手套",
                   "灵巧的手套",
                   "流云扇",
                   "神舞扇",
                   "宝石发梳",
                   "流动炼金术士工具包",
                   "无底的镇静剂瓶",
                   "小帮手",
                   "布鲁图斯·黑暗的特制炼金强化药水",
                   "Steffan Apfells的十倍强效炼金药水",
                   "墨菲斯托的完全治疗指南",
                   "墨菲斯托的恒久治疗药瓶",
                   "精灵庇护手套",
                   "白椴木弩",
                   "精灵弓箭手之戒",
                   "野地外科医生保护带",
                   "战地医生用品盒",
                   "南丁格尔的手册",
                   "赫沃克的烈焰面具",
                   "屠格若隆的石链",
                   "闪击石",
                   "麻痹之杖",
                   "强化闪光骨杖",
                   "玛丽安娜的围裙",
                   "菜刀",
                   "古斯塔夫的煎锅",
                   "大煮锅",
                   "狼人犬齿项链",
                   "狼人皮大衣",
                   "狼人皮",
                   "暗影狼人毛皮",
                   "强横狼人臂甲",
                   "狼人爪",
                   "灰烬爪",
                   "双焦透镜",
                   "浅绿色的束腰外衣",
                   "游侠腰带",
                   "猎鹰披风",
                   "白梦弦弓",
                   "雷果喷矢器",
                   "仙灵追随者",
                   "兽人射手戒指",
                   "霜火皇冠",
                   "洁白女士的风暴项链",
                   "萨弗莉娅的锦带",
                   "洁白女士的烈焰手镯",
                   "萨弗莉娅羽毛扇",
                   "萨弗莉娅的皇家华戒",
                   "金色小妖精",
                   "绿色小妖精",
                   "棕色小妖精",
                   "橙色小妖精",
                   "灰色小妖精",
                   "黑色小妖精",
                   "青铜色小妖精",
                   "红色小妖精",
                   "蓝色小妖精",
                   "紫色小妖精",
                   "赭色小妖精",
                   "耳聋的小妖精",
                   "喜欢读书的小妖精",
                   "玻璃瓶中的小海蛇",
                   "瓶子里的小毒蛇",
                   "玻璃瓶中的辣椒花",
                   "寒冰小妖精",
                   "火焰小妖精",
                   "特殊的寒冰小妖精",
                   "闪电小妖精",
                   "祝福狂暴诅咒头巾",
                   "优良狂暴诅咒头巾",
                   "狂暴诅咒头巾",
                   "祝福狂暴诅咒护身符",
                   "优良狂暴诅咒护身符",
                   "狂暴诅咒护身符",
                   "祝福狂暴诅咒徽章",
                   "优良狂暴诅咒徽章",
                   "狂暴诅咒徽章",
                   "雪狼皮",
                   "祝福狂暴诅咒手镯",
                   "优良狂暴诅咒手镯",
                   "狂暴诅咒手镯",
                   "黑熊皮靴",
                   "祝福狂暴诅咒戒指",
                   "优良狂暴诅咒戒指",
                   "狂暴诅咒戒指",
                   "老学究的眼镜",
                   "崇高教育者披风",
                   "万千教育法论述",
                   "海军司令的三角帽",
                   "闪亮的纯金耳环",
                   "金边单片镜",
                   "装着贵族拳枪的纹饰腰带",
                   "莫西斯的大氅",
                   "大师级的决斗用手枪",
                   "欧姆之戒",
                   "矿工灯",
                   "矮人眼罩",
                   "矿物辨识手册卷一",
                   "矿物辨识手册卷二",
                   "矿物辨识手册卷三",
                   "便携镐",
                   "冰冠",
                   "小冰冠",
                   "永冻冰水晶球",
                   "尖刺领",
                   "漂亮的丝衬衫",
                   "吸血鬼披风",
                   "吸血鬼之牙",
                   "碧玉杯",
                   "凯欣的圣冠",
                   "凯欣的防护护身符",
                   "凯欣的法袍",
                   "凯欣的祝福手镯",
                   "凯欣的圣戒",
                   "加古托的血盔",
                   "加古托的苦行腰带",
                   "加古托的天谴之刃",
                   "兹也·盖若特的火焰之冠",
                   "兹也·盖若特的永恒火焰鳞甲",
                   "兹也·盖若特的火焰阔斧",
                   "兹也·盖若特的烈阳长枪",
                   "阿力克的链甲护额",
                   "白骑士的链甲护额",
                   "阿力克的神圣长矛",
                   "白骑士的神圣长矛",
                   "阿力克的图腾",
                   "吴徒综的头盔",
                   "吴徒综的链甲衫",
                   "吴徒综的披风",
                   "吴徒综的护腕",
                   "沃根的面罩头盔",
                   "沃根的护胸",
                   "沃根的护腕",
                   "沃根的护手",
                   "沃根的链甲护腿",
                   "沃根的板甲靴",
                   "克图克亚的龙皮斗篷",
                   "不稳定元素外衣",
                   "大火花元素手套",
                   "大暴雪元素手套",
                   "大火花元素护腿",
                   "大暴雪元素护腿",
                   "大火花元素靴子",
                   "大暴雪元素靴子",
                   "雷神之力",
                   "塑能者手套",
                   "塑能者护腿",
                   "塑能者靴子",
                   "精神力操偶丝线",
                   "人偶士兵(锤)",
                   "人偶士兵(矛)",
                   "人偶士兵(剑)",
                   "人偶士兵(魔导杖)",
                   "人偶士兵(魔导书)",
                   "人偶士兵(祈祷书)",
                   "人偶士兵(投矛)",
                   "人偶士兵(投斧)",
                   "人偶士兵(冰弹)",
                   "人偶士兵(火球)",
                   "人偶士兵(毒气)",
                   "人偶士兵(痛苦印记)",
                   "人偶士兵(毁灭印记)",
                   "人偶士兵(老化印记)",
                   "人偶士兵(麻痹印记)",
                   "人偶士兵(弓)",
                   "人偶士兵(弩)",
                   "人偶士兵(火枪)",
                   "处刑者面具",
                   "仲裁者盔甲",
                   "惩戒者手套",
                   "加长火把",
                   "伊怒斯卡多之火",
                   "巨型火把",
                   "审判者之盾",
                   "火把",
                   "圣战之旗",
                   "恶魔烙印",
                   "灵魂烙印",
                   "火神之咆哮",
                   "火神之铁拳",
                   "苏-格拉-杜恩，闪电的面容",
                   "米德-瓦-沙恩，狂怒之槌",
                   "凡-加尔-诺斯，风暴的战鼓",
                   "旭日",
                   "曙光",
                   "娜黎比阿的冰花",
                   "娜黎比阿守护之雾",
                   "娜黎比阿之泪",
                   "愚者（正位）",
                   "I：魔术师（正位）",
                   "II：女祭司（正位）",
                   "III：皇后（正位）",
                   "IV：皇帝（正位）",
                   "V：教皇（正位）",
                   "VI：恋人（正位）",
                   "VII：战车（正位）",
                   "VIII：力量（正位）",
                   "IX：隐者（正位）",
                   "X：命运之轮（正位）",
                   "XI：正义（正位）",
                   "XII：倒吊者（正位）",
                   "XIII：死神（正位）",
                   "XIV：节制（正位）",
                   "XV：恶魔（正位）",
                   "XVI：塔（正位）",
                   "XVII：星星（正位）",
                   "XVIII：月亮（正位）",
                   "XIX：太阳（正位）",
                   "XX：审判（正位）",
                   "XXI：世界（正位）",
                   "“大胡子”的墨镜",
                   "“大胡子”的共鸣箱",
                   "“大胡子”的喇叭",
                   "魔音之梅莉卡",
                   "咏叹之泽米拉",
                   "伊洛克黑骑士头盔",
                   "伊洛克黑骑士护面",
                   "伊洛克黑骑士鳞甲护胸",
                   "伊洛克黑骑士护腕",
                   "伊洛克黑骑士板甲手套",
                   "伊洛克黑骑士板甲护腿",
                   "伊洛克黑骑士板甲靴",
                   "正义守护者头盔",
                   "正义守护者胸甲",
                   "正义守护者腰带",
                   "正义守护者护腕",
                   "正义守护者护手",
                   "正义守护者护腿",
                   "正义守护者战靴",
                   "炸药狂人斗篷",
                   "Karbumium动力飞拳",
                   "特斯翁·蓝塔的''糖果盒''",
                   "火药桶",
                   "小丑帽",
                   "红色小丑鼻子",
                   "小丑斗篷",
                   "黑暗小丑斗篷",
                   "小丑的毛线裤",
                   "小丑靴",
                   "猎人帽",
                   "斥候帽",
                   "荆棘猎手的羽叶头环",
                   "荆棘猎手的苍绿色耳钉",
                   "猎人皮甲",
                   "荆棘猎手的苍翠皮甲",
                   "荆棘猎手的软束腰",
                   "猎人靴",
                   "荆棘猎手的丛林长靴",
                   "密探兜帽",
                   "暗面刺客的外衣",
                   "暗杀者披风",
                   "夜幕披风",
                   "香克利的死神披风",
                   "隐躯腰带",
                   "影舞者之靴",
                   "血战背心",
                   "血战腰布",
                   "血战缠手皮带",
                   "巨魔格斗拳套",
                   "武器大师的金护腕",
                   "竞技场之王的格斗拳套",
                   "竞技场冠军的白金手镯",
                   "巨魔战士护腕",
                   "角斗士冠军腰带",
                   "角斗士大师腰带",
                   "竞技者护肩",
                   "永战之印记",
                   "莫卡的力量",
                   "郭卡的技巧",
                   "夏语",
                   "冬末",
                   "春雷",
                   "秋水",
                   "灰烬天堂",
                   "胡桃夹子",
                   "翁殊的希望",
                   "翁殊的忏悔胸甲",
                   "翁殊的繁星斗篷",
                   "天河护腕",
                   "熊之力量",
                   "鹰爪",
                   "蛇伤",
                   "皮尔斯的眼罩",
                   "皮尔斯的阴影护甲",
                   "皮尔斯的准确手套",
                   "皮尔斯的符文护膝",
                   "皮尔斯的无声靴",
                   "弗莱德雷的昂扬",
                   "弗莱德雷的声誉",
                   "弗莱德雷的掠夺",
                   "弗莱德雷的伪装",
                   "弗莱德雷的阴险",
                   "弗莱德雷的欺诈",
                   "炫目光华",
                   "阳炎烈焰",
                   "亨利·德梅恩斯的腰带",
                   "亨利·德梅恩斯的决斗手套",
                   "亨利·德梅恩斯的格挡剑",
                   "希尔瓦的流苏纱巾",
                   "希尔瓦的珍珠耳环",
                   "希尔瓦的束腰舞衣",
                   "希尔瓦的舞裙",
                   "希尔瓦的软底鞋",
                   "希尔瓦的蝴蝶发卡",
                   "圣军之怒",
                   "圣军之甲",
                   "圣军之律",
                   "圣军之判",
                   "圣军之罚",
                   "圣军之护",
                   "塞玛克什的古老图腾印记",
                   "塞玛克什的古老治疗印记",
                   "塞玛克什的古老野性印记",
                   "塞玛克什的古老石化印记",
                   "塞玛克什的古老战争印记",
                   "塞玛克什的古老诅咒印记",
                   "布罗恩的统御",
                   "布罗恩的抉择",
                   "布罗恩的变革",
                   "布罗恩的威势",
                   "布罗恩的陨落",
                   "卡尔多的天火之盔",
                   "卡尔多的神圣面容",
                   "卡尔多的天火护手",
                   "卡尔多的天火护腿",
                   "卡尔多的天火之靴",
                   "埃里芬的太阳之翼",
                   "埃里芬的太阳光辉",
                   "埃里芬的太阳臂章",
                   "埃里芬的太阳手套",
                   "埃里芬的太阳护腿",
                   "埃里芬的太阳之足",
                   "荷鲁荷斯的魔狼头盔",
                   "荷鲁荷斯的圣狼铠",
                   "荷鲁荷斯的战狼腰带",
                   "荷鲁荷斯的群狼守卫",
                   "荷鲁荷斯的铁狼手套",
                   "荷鲁荷斯的飓狼战靴",
                   "富摩尔的心眼",
                   "富摩尔的挑战",
                   "富摩尔的冷静",
                   "富摩尔的沉稳",
                   "富摩尔之旋",
                   "富摩尔之踵",
                   "血印者之拥",
                   "血印者审判腰带",
                   "血印者长靴",
                   "血印者的宁静之戒",
                   "血印者教典",
                   "斯托里芬的无穷法力之源",
                   "斯托里芬的暗影姿态",
                   "斯托里芬的御法姿态",
                   "斯托里芬的幻术姿态",
                   "斯托里芬的自然姿态",
                   "通天塔",
                   "天堂喷泉",
                   "赫法兰克丘之沙",
                   "梅里恩的古老知识",
                   "梅里恩的自然之力",
                   "梅里恩的自然平衡",
                   "梅里恩的丛林之魂",
                   "梅里恩的自然印记",
                   "暗精灵锁子甲",
                   "战舞者披风",
                   "暗精灵战斗披风",
                   "暗精灵烈焰腰带",
                   "暗精灵战斗手套",
                   "暗精灵剑舞手套",
                   "暗精灵黑色手套",
                   "暗精灵链甲护腿",
                   "暗精灵战靴",
                   "梅迪西斯的诘难",
                   "梅迪西斯的发问",
                   "梅迪西斯的虚实",
                   "梅迪西斯的连环",
                   "梅迪西斯的矛盾",
                   "布鲁图斯的布陷",
                   "布鲁图斯的辩驳",
                   "布鲁图斯的识破",
                   "布鲁图斯的异议",
                   "布鲁图斯的洞察",
                   "烈风之盔",
                   "狂风之怒",
                   "飓风之手",
                   "流沙护腿",
                   "狂砂之靴",
                   "猎狱者的护甲",
                   "猎狱者的护腕",
                   "猎狱者的霜冻手套",
                   "猎狱者的护腿",
                   "猎狱者的战靴",
                   "猎狱者的魔法项链",
                   "瓦雷尔的黑色宽沿帽",
                   "瓦雷尔的狙击眼镜",
                   "瓦雷尔的黑色风衣",
                   "瓦雷尔的黑色手套",
                   "瓦雷尔的黑色长靴",
                   "雷鸣",
                   "电闪",
                   "伊瑞姆的智慧",
                   "伊瑞姆的探求",
                   "伊瑞姆的劫难",
                   "伊瑞姆的旅途",
                   "伊瑞姆之星",
                   "伊瑞姆的启迪",
                   "精锐皇家射手皮帽",
                   "精锐皇家射手皮衣",
                   "精锐皇家射手腰带",
                   "精锐皇家射手皮手套",
                   "精锐皇家射手皮护腿",
                   "精锐皇家射手皮鞋",
                   "加维的天圣之眼",
                   "加维的天穹之眼",
                   "加维的告死天使",
                   "加维的死神一击",
                   "加维的蓄力手镯",
                   "加维的金刚手镯",
                   "加维的龙之护手",
                   "加维的裂龙护手",
                   "加维的狮鹫护腿",
                   "加维的伏龙护腿",
                   "加维的疾风之靴",
                   "加维的流星之靴",
                   "加维的尊道之戒",
                   "加维的阳影之戒",
                   "艾缇的魔女帽",
                   "艾缇的剑斗服",
                   "艾缇的刻印腰带",
                   "艾缇的决斗手套",
                   "艾缇的魔力长靴",
                   "艾缇的三愿戒指",
                   "伊格罗的千万变化之网",
                   "伊格罗的千刃披风",
                   "伊格罗的戏法之刃",
                   "伊格罗的舞刃之手",
                   "伊格罗的神奇酒壶",
                   "伊格罗的炸裂腰带",
                   "曼珠沙华头冠",
                   "贾戈林的灼天之面",
                   "贾戈林的深渊之氅",
                   "贾戈林的怒涛之心",
                   "贾戈林的奔雷之拳",
                   "贾戈林的舞蛇之鳞",
                   "贾戈林的风雷之靴",
                   "春之初吻",
                   "夏之爱恋",
                   "秋之回忆",
                   "冬之离别",
                   "华尔兹圆舞曲",
                   "阿斯坦的柠檬护腕",
                   "阿斯坦的杏仁手套",
                   "阿斯坦的核桃袋",
                   "阿斯坦的黑莓戒指",
                   "圣子的孔雀之冠",
                   "圣子的苍龙之鳞",
                   "圣子的神谕护腕",
                   "圣子的天穹之握",
                   "圣子的灵光之悟",
                   "圣子的净魂之戒",
                   "魔女猎人的黑色帽子",
                   "魔女猎人的灰色水晶吊坠",
                   "魔女猎人的黑大衣",
                   "魔女猎人的黑色斗篷",
                   "魔女猎人之锤",
                   "魔弹射手的华服",
                   "魔弹射手的死亡绽放",
                   "魔弹射手的腰带",
                   "魔弹射手的致命华彩",
                   "魔弹射手的低语倾述",
                   "魔弹射手的手镯",
                   "魔弹射手的完美谢幕",
                   "魔弹射手的皮手套",
                   "魔弹射手的玫瑰手套",
                   "魔弹射手的皮制裤子",
                   "魔弹射手的曼舞魔术",
                   "魔弹射手的猎人靴",
                   "魔弹射手的妖精靴",
                   "不朽之王的胜利",
                   "不朽之王的永恒统治",
                   "不朽之王的部族羁绊",
                   "不朽之王的灵魂",
                   "不朽之王的铸铁",
                   "不朽之王的往事",
                   "不朽之王的威仪",
                   "不朽之王的创造之柱",
                   "不朽之王的意志",
                   "不朽之王的铁拳",
                   "不朽之王的步履",
                   "霜雪之心",
                   "自然霜鸣",
                   "永恒深度",
                   "蓝仙姑",
                   "黄金天使",
                   "梅阿卡特斯的盔甲",
                   "梅阿卡特斯的虎皮斗篷",
                   "冰冷之风，梅阿卡斯特的舞翼之剑",
                   "无形喉舌",
                   "雷鸣灾难",
                   "艾缇的时钟眼",
                   "艾缇的永恒孤寂",
                   "艾缇的时光腕轮",
                   "艾缇的思念",
                   "加维的婚戒",
                   "艾缇的时刻弹''剑之冠''",
                   "艾缇的时刻弹''天空之火''",
                   "艾缇的时刻弹''寒冬之心''",
                   "艾缇的时刻弹''梦境之蛇''",
                   "艾缇的时刻弹''混沌之环''",
                   "艾缇的时刻弹''秘仪之境''",
                   "艾缇的时刻弹''世界之眼''",
                   "艾丽的空间之盔",
                   "艾丽的空间盔甲",
                   "艾丽的空间腰带",
                   "艾丽的空间披风",
                   "艾丽的空间护臂",
                   "艾丽的空间护手",
                   "艾丽的空间裙甲",
                   "艾丽的空间之靴",
                   "艾丽的引导之戒",
                   "娜黎比阿之抚",
                   "阿碧蓝之罚",
                   "水之衣",
                   "寒冰囚笼",
                   "镜光披风",
                   "冰霜之拳",
                   "冰川之力",
                   "流水之裙",
                   "赤虎之守护头盔",
                   "赤虎之守护图腾",
                   "赤虎之守护盔甲",
                   "赤虎之守护护手",
                   "赤虎之守护腿甲",
                   "赤虎之守护战靴",
                   "不死鸟之瞳",
                   "不死鸟之衣",
                   "不死鸟之翼",
                   "不死鸟之爪",
                   "不死鸟涅磐",
                   "不死鸟之足",
                   "热情洋溢的黄色头带",
                   "装饰有流苏的白色衣服",
                   "带有铁环的皮手套",
                   "蓝色耐穿的裤子",
                   "黑色长筒靴",
                   "Jarl、Trix与Leo",
                   "艾尔的冥思",
                   "艾尔的法理",
                   "艾尔的坚定",
                   "艾尔的睿智",
                   "艾尔的难题",
                   "艾尔的符文悖论",
                   "蛇之女妖的美艳之瞥",
                   "蛇之女妖的万蛇之环",
                   "蛇之女妖的蛇鳞护体",
                   "蛇之女妖的万蛇之缠",
                   "蛇之女妖的黑丝手套",
                   "蛇之女妖的毒吻之弩",
                   "蛇之女妖的蛇鳞之尾",
                   "蛇之女妖的鳍饰护足",
                   "蛇之女妖的毒吻之牙",
                   "蛇之女妖的秘术之蛇",
                   "格洛莉亚的战斗之剑",
                   "格洛莉亚的诅咒之剑",
                   "格洛莉亚的祝福之剑",
                   "格洛莉亚的难解之剑",
                   "格洛莉亚的真理之剑",
                   "新生与祝福之冠",
                   "永恒与希望之星",
                   "生命与安宁之铠",
                   "希望之刃 “斯卡兰提”",
                   "风暴与太阳之靴",
                   "精锐伊洛克黑骑士头盔",
                   "精锐伊洛克黑骑士盔甲",
                   "精锐伊洛克黑骑士腰带",
                   "精锐伊洛克黑骑士护手",
                   "精锐伊洛克黑骑士护腿",
                   "精锐伊洛克黑骑士战靴",
                   "天之律动",
                   "光之觉醒",
                   "海之赞颂",
                   "风之祝福",
                   "地之踏行",
                   "会动的诅咒娃娃",
                   "猩红血泪",
                   "染血的婚纱",
                   "鞭剑·镇魂",
                   "红舞鞋",
                   "哭泣的回音石",
                   "风之信使",
                   "风之旅途",
                   "风之眷顾",
                   "风之归宿",
                   "风之飞掠",
                   "风之沉思",
                   "戴维斯的审判之刃",
                   "狂啸焚火",
                   "虎之怒吼",
                   "魔女猎人的炎之哀悼",
                   "魔女猎人的冰霜之啸",
                   "魔女猎人的惩戒之鞭",
                   "魔女猎人的圣之赞颂",
                   "魔女猎人的面罩",
                   "魔女猎人的黑色紧身衣",
                   "魔女猎人带有六封针的腰布",
                   "魔女猎人的符文风衣",
                   "魔女猎人的黑色拳套",
                   "日暮",
                   "拂晓",
                   "一小袋动物礼物",
                   "古旧的牛角号",
                   "娜可·伊努的毛皮披风",
                   "用奇异树皮纤维编织的饰带",
                   "自然守护者的标记",
                   "Cirrutah的面纱",
                   "Cirrutah的幻影长袍",
                   "微光绸缎",
                   "镜绒手套",
                   "Cirrutah的幻影披风",
                   "银球的灰烬",
                   "梦幻魔技",
                   "智与愚的魔技",
                   "矛与盾的魔技",
                   "巧与拙的魔技",
                   "直与曲的魔技",
                   "创焰者的星冠",
                   "创焰者的呼吸",
                   "创焰者的灵皮",
                   "创焰者的调和",
                   "创焰者的共鸣",
                   "阿莲娜的晚礼服",
                   "阿莲娜的白色丝绸手套",
                   "碧绿水滴项链",
                   "天蓝色的水晶耳坠",
                   "冰霜绸缎",
                   "扎德曼的超魔头环",
                   "扎德曼的启示之服",
                   "扎德曼的噬魔之手",
                   "扎德曼的狂魔护腿",
                   "扎德曼的渎魔之靴",
                   "扎德曼的混沌宝典",
                   "扎德曼的烈印火戒",
                   "扎德曼的毁灭新星",
                   "扎德曼的弑魔之火",
                   "扎德曼的烈焰熔渣",
                   "哈戎的风暴之冠",
                   "哈戎的湮灭腰带",
                   "哈戎的灵魂手镯",
                   "哈戎的印章戒",
                   "黑袍法师哈戎的火焰护身符",
                   "星之导师的翡翠之首",
                   "星之导师的翡翠之目",
                   "星之导师的翡翠躯体",
                   "星之导师的翡翠之手",
                   "星之导师的翡翠之足",
                   "光熵激爆",
                   "熵光领域",
                   "哈斯图尔的领域",
                   "熵光烙印",
                   "熵光裂痕",
                   "虚空射手的冥府之盔",
                   "虚空射手的无限之光",
                   "虚空射手的无情追猎",
                   "虚空射手的混沌风暴",
                   "虚空射手的空无之门",
                   "勇者的手镯",
                   "魔王的大氅",
                   "魔王之心",
                   "唤雷符文",
                   "流星之杖",
                   "虚空之枪",
                   "魔王的影刃",
                   "正邪",
                   "雷鼓''诺凯因''",
                   "光辉之针",
                   "原始节奏",
                   "崇圣琴弦",
                   "捕鱼长矛",
                   "渔网",
                   "塔米尔的安全手套",
                   "安全之靴",
                   "冰尘剑",
                   "寒冰枷锁",
                   "哈罗尔的多彩披风",
                   "艾瑞娜的旅行者帽子",
                   "艾瑞娜的旅行者手套",
                   "艾瑞娜的短袖束腰上衣",
                   "艾瑞娜的旅行者手镯",
                   "装有一套杂耍道具的腰带",
                   "无上猎者的掠亡仪式",
                   "无上猎者的弑陨战甲",
                   "无上猎者的富饶收获",
                   "无上猎者的还诸自然",
                   "无上猎者的引路锐光",
                   "无上猎者的映奇宝珠",
                   "内芙妮的女武神翼盔",
                   "内芙妮的女武神胸甲",
                   "内芙妮的女武神之靴",
                   "内芙妮的女武神护手",
                   "内芙妮的女武神裙甲",
                   "帕索斯的迷雾漩涡",
                   "帕索斯的隐雾回廊",
                   "帕索斯的烟雾护腕",
                   "帕索斯的幻雾掠影",
                   "帕索斯的锁雾聚群",
                   "帕索斯的虚雾匿踪",
                   "巴卡勒的梦魇虚空",
                   "巴卡勒的催眠面具",
                   "巴卡勒的幻梦外衣",
                   "巴卡勒的梦境巡影",
                   "巴卡勒的梦生谬思",
                   "巴卡勒的眠梦法球",
                   "嘉希拉的项链",
                   "索坎的指环",
                   "索菲亚的手链",
                   "艾尔斯拉的意志",
                   "艾尔斯拉的乌黯穿刺",
                   "艾尔斯拉的斩杀者",
                   "艾尔斯拉的神圣保护区",
                   "白银向日葵",
                   "紫水晶蝴蝶兰",
                   "翡翠秋菊",
                   "赤红琥珀芍药",
                   "黄玉百合",
                   "黄金玫瑰",
                   "黑玛瑙郁金香",
                   "萨索娜，花妖精之女王",
                   "炎狮的辉煌",
                   "炎狮的战魂",
                   "炎狮的怒吼",
                   "炎狮的意志",
                   "星光的光辉",
                   "星光的威光",
                   "星光的裁决",
                   "星光的辉耀",
                   "星光的远征",
                   "北之牙王头盔",
                   "北之牙王护手",
                   "北之牙王护胫",
                   "北之牙王腰带",
                   "北风剑舞曲-怒风",
                   "北风剑舞曲-暴风",
                   "北风剑舞曲-清风",
                   "北风剑舞曲-游风",
                   "北风剑舞曲-烈风",
                   "北风剑舞曲-狂风",
                   "北风剑舞曲-迅风",
                   "布林达萨斯的骨戒",
                   "布林达萨斯的黑戒",
                   "破旧的轻远足杖",
                   "破旧的钵",
                   "破旧的修道士服",
                   "破旧的布护腿",
                   "尚未完成的木雕",
                   "卡克斯的战斗法杖",
                   "卡克斯的真正战斗法杖",
                   "卡克斯的手镯",
                   "卡克斯的特工手套",
                   "卡克斯的闪光护胫",
                   "虫鸣曲，冰原上的安眠曲",
                   "虫鸣曲，森林里的瀑布声",
                   "虫鸣曲，死湖上的波动声",
                   "虫鸣曲，潜伏阴影的杀意",
                   "虫鸣曲，火山下的萤光火",
                   "虫鸣曲，破蛹新生的喜悦",
                   "虫鸣曲，花田处的风铃音",
                   "虫鸣曲，迷雾中的幻惑音",
                   "艾斯米亚风暴头巾",
                   "艾斯米亚风暴之刃",
                   "艾斯米亚风暴之戒",
                   "古朴书卷",
                   "沉声低吟",
                   "菲戈德什尔之眼",
                   "菲戈德什尔之卷",
                   "一块甲壳法宝",
                   "图丁疫鼠耳环",
                   "提尔蝇翼飞刀",
                   "插有三把飞刀的血色鼠皮腰带",
                   "涂有黑死病毒的吹箭腰带",
                   "涂有黑死病毒的飞刀",
                   "瘟疫之盾",
                   "血色蚊子尖刺",
                   "血色蚊子尖牙",
                   "血色蚊子毒针",
                   "装有提尔蝇翼飞刀的腰带",
                   "自在之碗",
                   "象牙筷",
                   "阴影战盔",
                   "阴影战裙",
                   "钢铁面纱",
                   "钢铁帷幕",
                   "钢铁屏障",
                   "钢铁洪流",
                   "钢铁铸造者",
                   "钢铁教义",
                   "影舞精灵链甲护腿",
                   "影舞精灵锁子甲",
                   "影舞精灵战靴",
                   "影舞精灵黑色手套",
                   "影舞精灵暗杀箭",
                   "见习驱魔人面纱",
                   "见习驱魔人披肩",
                   "见习驱魔人项链",
                   "被诅咒者的黑冠",
                   "永恒之星",
                   "漆黑的战铠",
                   "黄昏之刃“斯卡兰提”",
                   "风暴之靴",
                   "地狱锻铁头盔",
                   "地狱锻铁铠甲",
                   "地狱锻铁手甲",
                   "地狱锻铁护腿",
                   "地狱锻铁靴",
                   "权能授冕",
                   "谦卑护持",
                   "圣鹰翅翎",
                   "无归天遣",
                   "行走诸野",
                   "艾拉蓓尔的刀锋意志",
                   "艾拉蓓尔的利刃冲击",
                   "艾拉蓓尔的均衡之道",
                   "艾拉蓓尔的御空姿态",
                   "艾拉蓓尔的热诚之心",
                   "艾拉蓓尔的至尊锋刃",
                   "血印者的遗物",
                   "凯欣真正的圣物",
                   "尼巴斯的咒灵石",
                   "尼巴斯的摄魂眼",
                   "尼巴斯的招魂袍",
                   "尼巴斯的颅相串",
                   "尼巴斯的探知手",
                   "弥斯喀拉的贪婪直觉",
                   "弥斯喀拉的可怖尊容",
                   "弥斯喀拉的阴影滑翔",
                   "弥斯喀拉的暴虐统治",
                   "弥斯喀拉的凶残手段",
                   "弥斯喀拉的狡诈多端",
                   "弥斯喀拉的先发制人",
                   "破晓的光芒，斯基法",
                   "流星的轨迹，赫利姆",
                   "莉芙的极光头环",
                   "莉芙的银边眼镜",
                   "莉芙的冰裂法袍",
                   "莉芙的幸运宝石手镯",
                   "莉芙的冰雾靴",
                   "不可能的友谊",
                   "珍宝大盗的风雅",
                   "珍宝大盗的眼光",
                   "珍宝大盗的声势",
                   "珍宝大盗的背叛",
                   "珍宝大盗的诡计",
                   "考古学家的稳重",
                   "考古学家的渊博",
                   "考古学家的细致",
                   "考古学家的勇气",
                   "考古学家的技巧",
                   "沾满油脂的烧烤围裙",
                   "伊赞奥托的大号野餐防潮垫手提户外豪华型",
                   "北辰",
                   "“爱”的搅拌棒",
                   "北境天狼刃",
                   "黑暗料理许可证",
                   "全秃的假发",
                   "崭新的黄色紧身胶衣",
                   "普通的白色披风",
                   "认真制作的红色拳套",
                   "佩里德特的命运之眼",
                   "佩里德特的命运神殿",
                   "佩里德特的命运结界",
                   "佩里德特的命运篡夺之手",
                   "佩里德特的命运预言书",
                   "佩里德特的命运逆转",
                   "佩里德特的命运宣告",
                   "万兽飞腾",
                   "暴风烙印",
                   "极光利爪",
                   "渊海鳞蜕",
                   "漫步大地",
                   "笼中鸟的夜曲",
                   "寂静先知的灰晶耳环",
                   "灰霜使者的斗篷",
                   "灵魂枷锁",
                   "风暴指挥官的战争号召",
                   "风暴指挥官的军团荣耀",
                   "风暴指挥官的战争指令",
                   "风暴指挥官的战争预感",
                   "风暴指挥官的战争奉献",
                   "风暴指挥官的战争掠夺",
                   "神罚骑士的激昂",
                   "神罚骑士的誓词",
                   "神罚骑士的力量",
                   "神罚骑士的进军",
                   "神罚骑士的践踏",
                   "提尔拉蒙的溶火之盔",
                   "提尔拉蒙的炎狱之铠",
                   "提尔拉蒙的煌翼披风",
                   "提尔拉蒙的光焰之手",
                   "提尔拉蒙的灼风之靴",
                   "提尔拉蒙的永恒酒",
                   "提尔拉蒙的琼玉之盔",
                   "提尔拉蒙的寒泉之铠",
                   "提尔拉蒙的霜华披风",
                   "提尔拉蒙的冰花之手",
                   "提尔拉蒙的雪河之靴",
                   "提尔拉蒙的炎火石",
                   "费洛莉丝的弦月之冠",
                   "费洛莉丝的骤雨手环",
                   "费洛莉丝的极光之握",
                   "费洛莉丝的白夜护腿",
                   "费洛莉丝的星影之靴",
                   "费洛莉丝的虹彩之戒",
                   "圣堂执行官的朝圣之冠",
                   "圣堂执行官的赐圣之服",
                   "圣堂执行官的祝圣之护",
                   "圣堂执行官的崇圣之墙",
                   "圣堂执行官的净圣之手",
                   "圣堂执行官的入圣之靴",
                   "大地诸相：否命神眼",
                   "大地诸相：万世创伤",
                   "大地诸相：无尽轮回",
                   "大地诸相：太初圣华",
                   "大地诸相：天际怒火",
                   "舞空者之冠",
                   "舞灵者之面",
                   "舞幻者之服",
                   "舞风者之翼",
                   "舞咒者之臂",
                   "舞火者之靴",
                   "乌尔穆诺斯之环",
                   "迪乌夫之环",
                   "哈梅尔之环",
                   "伊特拉翁之环",
                   "欧里西克之环",
                   "基辛格耶之环",
                   "盖拉诺斯之环",
                   "涅普提尔之环",
                   "普路托托之环",
                   "繁星射击",
                   "神圣进军之序·战争号召",
                   "神圣进军之一·战争誓言",
                   "神圣进军之二·圣者训诫",
                   "神圣进军之三·无尽黑夜",
                   "神圣进军之四·最后祷告",
                   "神圣进军之五·终结宿命",
                   "神圣进军之六·制裁之日",
                   "神圣进军之终·凡人伟业",
                   "重小刀",
                   "阿斯卡的反光镜",
                   "阿斯卡的塑身腿铠",
                   "阿斯卡的玫瑰护胸",
                   "阿斯卡的璨链手甲",
                   "阿斯卡的风雅战盔",
                   "阿斯卡的高挑战靴",
                   "西马尔达的预兆",
                   "叶萨拉的净化",
                   "卡尔莫斯的灾殃",
                   "特荣噶的圈套",
                   "马库拉的暴戾",
                   "巴桑马约的野火",
                   "缝有铁片的皮手套",
                   "架弩巨盾",
                   "阿克雷斯祝福指环",
                   "叶尼·阿里·斑念之卷",
                   "狂啸者的赤羽冠",
                   "狂啸者的赤魔眼",
                   "狂啸者的焰影化身",
                   "狂啸者的炽焰靴",
                   "狂啸者的赤星戒",
                   "和平领袖“柯尔特”",
                   "双管怪兽“塞缪尔”",
                   "“斯特森”式的宽沿高顶毡帽",
                   "印花方巾",
                   "光亮的牛皮衬衣",
                   "行者的皮套裤",
                   "带有星形缀饰的冷酷马靴",
                   "套索",
                   "卡米娅的炎羽头环",
                   "卡米娅的圣灵之服",
                   "卡米娅的炽蓝腰带",
                   "卡米娅的暮光披风",
                   "卡米娅的翼梦之靴",
                   "卡米娅的杀戮戒曲",
                   "七剑战歌 冰风舞翼之歌",
                   "七剑战歌 北风呼啸之歌",
                   "七剑战歌 原初魔焰之歌",
                   "七剑战歌 天劫红雾之歌",
                   "七剑战歌 天国星坠之歌",
                   "七剑战歌 天极地限之歌",
                   "七剑战歌 天罚罪赦之歌",
                   "七剑战歌 屠龙勇士之歌",
                   "七剑战歌 帕蓝提卡之歌",
                   "七剑战歌 帝国荣耀之歌",
                   "七剑战歌 提利亚斯之歌",
                   "七剑战歌 斯卡兰提之歌",
                   "七剑战歌 湖中仙女之歌",
                   "七剑战歌 灾祸献祭之歌",
                   "七剑战歌 红莲圣女之歌",
                   "七剑战歌 苍红劫火之歌",
                   "断罪之火 罗萨耶尔",
                   "法则之火 哈姆贝利",
                   "审判之火 弗洛巴斯",
                   "真红之火 亚伯格拉",
                   "天劫之火 亚斯拉特尔",
                   "盛妆镇魂歌",
                   "盛妆紫罗兰",
                   "战舞幻想曲",
                   "盛妆天鹅舞",
                   "盛妆圆武步",
                   "法莎莉雅的绝对防御圈α",
                   "法莎莉雅的绝对防御圈αⅡ",
                   "法莎莉雅的绝对防御圈β",
                   "法莎莉雅的绝对防御圈βⅡ",
                   "法莎莉雅的绝对防御圈γ",
                   "法莎莉雅的绝对防御圈γⅡ",
                   "法莎莉雅的丰饶α",
                   "法莎莉雅的审判日α",
                   "法莎莉雅的丰饶β",
                   "法莎莉雅的审判日β",
                   "法莎莉雅的丰饶γ",
                   "法莎莉雅的终结γ",
                   "法莎莉雅的圣翼α",
                   "法莎莉雅的天空主宰α",
                   "法莎莉雅的圣翼β",
                   "法莎莉雅的天空主宰β",
                   "法莎莉雅的圣翼γ",
                   "法莎莉雅的启示录γ",
                   "法莎莉雅的七色炙焰环α",
                   "法莎莉雅的永恒冰弹α",
                   "法莎莉雅的七色炙焰环β",
                   "法莎莉雅的永恒冰弹β",
                   "法莎莉雅的七色炙焰环γ",
                   "法莎莉雅的永恒冰弹γ",
                   "法莎莉雅的冷酷热诚α",
                   "法莎莉雅的幻影之舞α",
                   "法莎莉雅的冷酷热诚β",
                   "法莎莉雅的幻影之舞β",
                   "法莎莉雅的冷酷热诚γ",
                   "法莎莉雅的幻影之舞γ",
                   "龙之灵",
                   "龙之魂",
                   "龙之活力",
                   "龙之怒火",
                   "龙之爪牙",
                   "龙之迅影",
                   "亚莉克希亚的必要之恶",
                   "亚莉克希亚的无序法则",
                   "亚莉克希亚的原罪理论",
                   "亚莉克希亚的矛盾概念",
                   "亚莉克希亚的混乱逻辑",
                   "拂晓骑士的头盔",
                   "拂晓骑士的护胸",
                   "拂晓骑士的护手",
                   "拂晓骑士的护腿",
                   "拂晓骑士的靴子",
                   "拂晓骑士的圣泉",
                   "拂晓神剑",
                   "希望的缎带",
                   "创生的乐园",
                   "救赎的羽翼",
                   "法则的现世",
                   "奇迹与救赎之弓",
                   "奇迹的末路",
                   "撼地者的骄傲",
                   "撼地者的胜利",
                   "撼地者的平衡",
                   "撼地者的巨力",
                   "撼地者的行进",
                   "裂空骑士的头盔",
                   "裂空骑士的盔甲",
                   "裂空骑士的护腕",
                   "裂空骑士的护手",
                   "裂空骑士的靴子",
                   "裂空骑士的箴言：光明",
                   "裂空骑士的箴言：圣佑",
                   "裂空骑士的箴言：复仇",
                   "裂空骑士的箴言：天罚",
                   "裂空骑士的箴言：守护",
                   "裂空骑士的箴言：正义",
                   "裂空骑士的箴言：驱魔",
                   "提灯人的讯问",
                   "提灯人的奉献",
                   "提灯人的处决",
                   "提灯人的扣门",
                   "提灯人的忏悔",
                   "百战之面",
                   "秩序装甲",
                   "无畏束腰",
                   "克邪铁拳",
                   "历艰长靴",
                   "名出法随",
                   "至理渊积",
                   "通晓万物",
                   "话言机先",
                   "令行境变",
                   "康纳德之理智",
                   "康纳德之批判",
                   "康纳德之理念",
                   "康纳德之范畴",
                   "康纳德之现象",
                   "辛德格尔的在场",
                   "辛德格尔的发问",
                   "辛德格尔的路标",
                   "辛德格尔的存在",
                   "辛德格尔的此在",
                   "托马斯的灵感火花",
                   "托马斯的一目十行",
                   "托马斯的终极试验",
                   "托马斯的意志专一",
                   "托马斯的细微之手",
                   "托马斯的卷腿长裤",
                   "拉贝尔的答案",
                   "拉贝尔的踪迹",
                   "拉贝尔的游历",
                   "拉贝尔的博识",
                   "拉贝尔的探险",
                   "大贤者拉贝尔之杖",
                   "啃食“脸孔舍弃”",
                   "解放“人性背离”",
                   "支援“身体舍弃”",
                   "魔铳“双手舍弃”",
                   "决死“同伴舍弃”",
                   "不完整的棋盘",
                   "白棋子：战车(残缺)",
                   "白棋子：骑士(残缺)",
                   "白棋子：主教(残缺)",
                   "白棋子：禁卫军(残缺)",
                   "白棋子：王后(残缺)",
                   "白棋子：国王(残缺)",
                   "阿碧蓝的光线",
                   "阿碧蓝放逐之地",
                   "阿碧蓝之血",
                   "流火逐风",
                   "离光之影",
                   "伊索德的六目冠",
                   "伊索德的灵魂面具",
                   "伊索德的冥想法袍",
                   "伊索德的负极斗篷",
                   "伊索德的无极之手",
                   "伊索德的反击护腿",
                   "伊怒斯卡多的光辉",
                   "伊怒斯卡多的威光",
                   "伊怒斯卡多的裁决",
                   "伊怒斯卡多的辉耀",
                   "伊怒斯卡多的远征",
                   "焦炭和声",
                   "冷血小调",
                   "碎颅鼓点",
                   "穿心咏叹",
                   "邪物合唱",
                   "鞭挞独奏",
                   "心碎者之声",
                   "萨默斯的闪耀星环",
                   "巴顿的假眼",
                   "诺曼的荒野印记",
                   "埃里克之壁",
                   "罗根的嗜金利爪",
                   "班纳的刚毅印记",
                   "奥萝洛的发丝",
                   "斯坦佛的骨戒",
                   "墨拉尔的时光之戒",
                   "墨拉尔的天知之戒",
                   "墨拉尔的法眼之戒",
                   "墨拉尔的群星之书",
                   "雷光之钢护",
                   "雷霆护卫之手",
                   "雷钢之护膝",
                   "修身祭典华服",
                   "祭典百宝箱",
                   "祭典用木屐",
                   "怨魂蜡烛",
                   "掠夺者角盔",
                   "狂战士项链",
                   "族徽锁子甲",
                   "连串飞斧",
                   "白狐披风",
                   "Seynswart黄金护手",
                   "熊罴裙",
                   "鲨齿长靴",
                   "高峨斯凯之石",
                   "阿纳贝尔的翼盔",
                   "阿纳贝尔的降临",
                   "阿纳贝尔的腕刃",
                   "阿纳贝尔的壁垒",
                   "阿纳贝尔的轰鸣",
                   "格兰姆的抗拒",
                   "瑞吉思的精粹",
                   "莱迪斯的曲径",
                   "贝罗恩的艺术",
                   "修克拜因的燃料棒",
                   "文莱德之“隐形”眼镜",
                   "文莱德之无形保护",
                   "文莱德之沉重补给",
                   "文莱德之致命交集",
                   "归乡之线",
                   "惧日者的标志",
                   "星盘戒",
                   "罗恩的蹄铁",
                   "力敌势均",
                   "力挽狂澜",
                   "力挑大梁",
                   "力克群魔",
                   "力发千钧",
                   "力贯关山",
                   "力战不竭",
                   "鲜红色手术长袍",
                   "布鲁图斯博士的礼物",
                   "洁净外科手套",
                   "药剂防护长裤",
                   "奇怪的炼金骨架",
                   "怪客的密眼秘罩",
                   "怪客的晚礼华服",
                   "怪客的剧毒仪式",
                   "怪客的防护手套",
                   "怪客的疾跑快靴",
                   "荒年盛宴",
                   "杀死一只知更鸟",
                   "十个小丁图安蛮人",
                   "偶尔会唱歌的皮革娃娃",
                   "女巫的游戏",
                   "当黑马在梦里的时候",
                   "瑞俄伯的冠冕",
                   "德雷索尼亚之光",
                   "贝莱隆的裁决",
                   "天父在上",
                   "红莲圣女",
                   "隼丘的圣迹",
                   "瑟罕之刃",
                   "吉特奥之怒",
                   "利昂乔尔戈斯之牙",
                   "纳图拉姆戈德森的嘶吼",
                   "伊加尔的狂热荣光",
                   "伊坎亚的老旧伪装",
                   "伊坎亚的神秘腰带",
                   "伊坎亚的远行之翼",
                   "伊坎亚的力量平衡",
                   "伊坎亚的玄奇杖",
                   "伊坎亚的雷钥石",
                   "阿撒格斯的韧性",
                   "乌图马尔的戒律",
                   "佩奥米氐的宁静",
                   "提沃的勇毅",
                   "万日之锋",
                   "伊姆巴罗什的托付",
                   "玛嘉烈的黯灭灵光",
                   "玛嘉烈的灵械之躯",
                   "玛嘉烈的告死之爪",
                   "不死圣徒",
                   "谨父之名",
                   "悔忏祈愿",
                   "铸灵入铁",
                   "黑灾之械",
                   "玛嘉烈的绝地再起",
                   "洞察之鹤“瑟瑞拉”",
                   "创造之祖“亚当斯”",
                   "燃尽之蝠“夏洛克”",
                   "狂乱之熊“梅丽尔”",
                   "灵能之虎“菲兹克”",
                   "传承之鹿“罗斯特”",
                   "隐士君临者",
                   "无冕剑皇",
                   "永不落幕的大竞技场",
                   "万民典范",
                   "皇帝与死神",
                   "杀戮剑皇",
                   "命运之战车",
                   "命运剑皇",
                   "刀剑魔术师",
                   "斩击剑皇",
                   "南丁格尔的狂热信念",
                   "南丁格尔的强韧精神",
                   "南丁格尔的医疗理解",
                   "南丁格尔的钢铁看护",
                   "南丁格尔的天使之声",
                   "旁若无人",
                   "死亡将至",
                   "刺客诡道",
                   "寸草不生",
                   "十步一杀",
                   "女神祝福的头冠",
                   "永不凋谢的勇士",
                   "刺穿虚空的枪尖",
                   "穹光照耀的盾牌",
                   "快若流星的骏足",
                   "天袭者的冰瀑",
                   "天袭者的流星",
                   "天袭者的山崩",
                   "天袭者的霹雳",
                   "天袭者的飙风",
                   "狴希摩斯之灵",
                   "狴希摩斯之喉",
                   "狴希摩斯之躯",
                   "狴希摩斯之影",
                   "狴希摩斯之奔",
                   "狴希摩斯之力",
                   "雷瓦丁的永恒",
                   "雷瓦丁的不灭",
                   "雷瓦丁的辉煌",
                   "雷瓦丁的胜利",
                   "雷瓦丁的凯旋",
                   "雷瓦丁的豪情",
                   "永恒寒冰",
                   "不灭烈焰",
                   "出离",
                   "明戒",
                   "无匹",
                   "武极",
                   "猛进",
                   "索菲亚的启示",
                   "索菲亚的制裁",
                   "索菲亚的训诫",
                   "索菲亚的铁拳",
                   "索菲亚的慈悲",
                   "痛苦鸣奏，刃风旋轮之曲",
                   "痛苦鸣奏，岩浆血化之曲",
                   "痛苦鸣奏，巨浪碰撞之曲",
                   "痛苦鸣奏，荆棘穿刺之曲",
                   "痛苦鸣奏，薄冰覆骨之曲",
                   "痛苦鸣奏，蚀毒溶解之曲",
                   "痛苦鸣奏，裂魂亡音之曲",
                   "文森特的誓约头盔",
                   "文森特的誓约盔甲",
                   "文森特的誓约腰带",
                   "文森特的誓约护手",
                   "文森特的誓约护腿",
                   "柯莉亚的终极时刻",
                   "乌米诺的奇思妙想",
                   "乌米诺的闪耀之光",
                   "拉里的神圣庇护",
                   "莫利斯的禁锢之手",
                   "伊文思的血之沸腾",
                   "莫利斯的灵魂腐蚀",
                   "柯莉亚的审判之矢",
                   "伊文思的幻想之吻",
                   "拉里的神圣祝福",
                   "爱德蒙的钢铁意志",
                   "爱德蒙的忘却复仇",
                   "爱德蒙的困境智慧",
                   "爱德蒙的蓝色闪光",
                   "爱德蒙的双蛇印记",
                   "罗拉夏克的头环",
                   "罗拉夏克的终焉圣痕",
                   "罗拉夏克的手镯",
                   "罗拉夏克的戒指",
                   "罗拉夏克的法宝",
                   "古库马茨，文明曙光",
                   "玛士撒拉，伟大光辉",
                   "穆图库弗，崇高理想",
                   "维图阿尔法金，呼唤黎明",
                   "费扎里奇，响彻天空",
                   "麦沙马卡力，璀璨生命",
                   "人偶少女：墨水晶",
                   "人偶少女：红玉髓",
                   "人偶少女：月光石",
                   "人偶少女：日长石",
                   "人偶少女：金玛瑙",
                   "人偶少女：玛贝珠",
                   "人偶少女：蛇眼石",
                   "墨水晶：剑身武装",
                   "日长石：宁静之风",
                   "月光石：永恒之蓝",
                   "玛贝珠：冰舞蝶",
                   "红玉髓：神圣领域",
                   "蛇眼石：虚空天使",
                   "墨水晶：斩击",
                   "墨水晶：龙卷",
                   "日长石：怠倦",
                   "日长石：鬼怪",
                   "月光石：勇气",
                   "月光石：神魔",
                   "玛贝珠：单纯",
                   "红玉髓：傲慢",
                   "红玉髓：花瓣",
                   "蛇眼石：源泉",
                   "蛇眼石：神秘",
                   "金玛瑙：音波",
                   "金玛瑙：魔力",
                   "贤者宝石",
                   "阿里士的假头骨",
                   "阿里士的长衣",
                   "阿里士的蜘蛛网",
                   "阿里士的军械库",
                   "阿里士的护腿",
                   "云涌雷动曲",
                   "弧卷雷截曲",
                   "无声听雷曲",
                   "雷轰电掣曲",
                   "雷霆震怒曲",
                   "震聋发聩曲",
                   "霹雳飘风曲",
                   "灾劫：西斯托利亚的奇迹",
                   "万毁之翼",
                   "灾劫：众志成城",
                   "灾劫：吉拉波尔的希望",
                   "灾劫：禁忌智慧果实",
                   "灾劫：神圣之进军",
                   "贝恩哈特的愤怒",
                   "贝恩哈特的不懈",
                   "贝恩哈特的怀疑",
                   "圣利摩米欧之卵",
                   "贝恩哈特的绝望",
                   "哈洛贝特的智慧",
                   "哈洛贝特的节制",
                   "哈洛贝特的正义",
                   "哈洛贝特的创造",
                   "哈洛贝特的勇气",
                   "哈洛贝特的破碎之穹",
                   "被圣水浸泡过的战神头巾",
                   "被圣水浸泡过的战神长袍",
                   "被圣水浸泡过的战神护腿",
                   "被圣水浸泡过的战神之靴",
                   "宗动非动之诘",
                   "千禧回环之祈",
                   "宝石列阵之谜",
                   "空无基石之证",
                   "无尽边界之形",
                   "奥努蒂斯的玫瑰金冠",
                   "奥努蒂斯的黄金天车",
                   "奥努蒂斯的白翼披风",
                   "奥努蒂斯的破晓护腕",
                   "奥努蒂斯的极光之靴",
                   "古海兽的凝视",
                   "古海兽的压迫",
                   "古海兽的镰足",
                   "古海兽的绞杀",
                   "古海兽的深潜",
                   "修纳特的挑衅",
                   "修纳特的死牙",
                   "修纳特的加护",
                   "修纳特的猛击",
                   "修纳特的魔枪",
                   "修纳特的魔药",
                   "黑色女巫披风",
                   "女巫扫把",
                   "女巫的小靴子",
                   "女巫的大锅",
                   "致亡灵法师塔博塔博的情书",
                   "勇气调音笛",
                   "小音乐盒",
                   "胜利之歌",
                   "粗框眼镜",
                   "教鞭",
                   "书签",
                   "褪色的旧戒指",
                   "亡灵学徒手套",
                   "巫妖之手",
                   "暗魔法纲要",
                   "亚莉克希亚的正义",
                   "亚莉克希亚的制裁",
                   "亚莉克希亚的行刑之矛",
                   "亚莉克希亚的处决之剑",
                   "亚莉克希亚的钢之铁裙",
                   "с̶͖̲̐ё̸̢͉́́н̸͉̏̽ж̵̨̱͑̾и̴͕̇н̸̺̊д̷̜͚̋ѝ̴̫̹͝с̷̧̝̌̐е̴͚͋н̴͍̜̀",
                   "म̵͙̏͊न̶̤̖͛͗ल̸̊̓पय̷̰͑̏त̵͈̩̂न̷̰̖̂",
                   "ه̶̼̀ل̴̮̭̔ ̸̰͝ͅأ̴̝̞̀̐ن̴̛͍̼̕ت̵̯͋̂ ̶̥͆م̶͙̳̓̀ج̴̝̩̎ن̴̹̪̑͒و̶̭̻̍͝ن̷̹̌",
                   "మ̴͖̒ీ̴̝̇̿ర̶̖̍͜ు̸͈̀ ̸̗̞̍̈́ప̴̧̯͌ి̸̧͙̐͗చ̴̶్̗̹͖̲̍̓̽చ̵̛̬̜̕ి̴̝̾వ̵̲͙̍ా̷",
                   "አ̷̦͑͊ን̸̙̀̃ተ̸̠̜̉ ̸̹͔̈́̍እ̵̡̑ብ̴̲͂ድ̸̨̀ ̴͇͐͐ነ̵̪́͋ህ̴̰͉̓",
                   "剑跃者锐哨",
                   "剑跃者首领外衣",
                   "剑跃者剑舞腰带",
                   "带有剑跃者徽记的斗篷",
                   "剑跃者黑手套",
                   "剑跃者宝典",
                   "剑跃者之裙",
                   "剑跃者指环",
                   "象牙骨兜",
                   "克若姆的头盔",
                   "狂吼的双角骨盔",
                   "远古巨兽的头骨",
                   "一绺白狼毛",
                   "高等兽人战士护符",
                   "锋牙的友谊护符",
                   "染血骨牙链",
                   "乌齐尼的骨牙链",
                   "兽人酋长兽皮",
                   "塞拉兽皮",
                   "传奇狂战士兽皮",
                   "食人魔挎包",
                   "食人魔巨剑",
                   "巨大的长骨刺矛",
                   "雷鸣食人魔战锤",
                   "克伦切的兽人重盾",
                   "食人魔之王的皮制盾牌",
                   "枯萎树冠",
                   "仪式木珠",
                   "木质的楚瓦甲虫坠子",
                   "沙狮护腕",
                   "游侠",
                   "拉尚领域之砂",
                   "深渊之砂",
                   "艾可萨的降灵项链",
                   "冷寂之山",
                   "湮灭静界",
                   "凗凒灵脉",
                   "破碎冻云",
                   "战栗核心",
                   "无私的奉献",
                   "抉择的困扰",
                   "互助的美好",
                   "勤奋的前行",
                   "燃烧的艺术",
                   "饮露者之觉",
                   "饮露者之戒",
                   "饮露者之眠",
                   "饮露者之轻",
                   "饮露者之净",
                   "困罔之酿",
                   "懈怠之酿",
                   "流离之酿",
                   "消退之酿",
                   "虚妄之酿",
                   "迷狂之酿",
                   "颠踬之酿",
                   "宁神之露",
                   "海纳之露",
                   "生机之露",
                   "石心之露",
                   "追风之露",
                   "通灵之露",
                   "醍醐之露",
                   "龙魂斗气",
                   "龙魂低语",
                   "龙魂同调",
                   "龙魂雷光",
                   "龙魂漫步",
                   "莱菲斯的守望",
                   "莱菲斯的瞭望",
                   "莱菲斯的誓言",
                   "莱菲斯的祝福",
                   "莱菲斯的阴影",
                   "克莱泽尔的聆听",
                   "克莱泽尔的叹息",
                   "克莱泽尔的耳语",
                   "克莱泽尔的注视",
                   "克莱泽尔之戒",
                   "炽焰之心",
                   "焚焰之躯",
                   "舞焰之翼",
                   "爆焰之手",
                   "圣焰之戒",
                   "天蝎之火",
                   "夜莺之星",
                   "菈比莉丝的白猫糖",
                   "菈比莉丝的黑猫糖",
                   "菈比莉丝的青蛙糖",
                   "菈比莉丝的兔子糖",
                   "“斯卡兰提” & “帕蓝提卡”",
                   "妲尼希亚之杖",
                   "妲尼希亚法球",
                   "路法斯的直觉",
                   "路法斯的博弈",
                   "路法斯的指令",
                   "路法斯的歼灭",
                   "路法斯的戒指",
                   "沙域战铠",
                   "无尽流沙",
                   "幻沙雨",
                   "沙覆牢",
                   "远古沙精",
                   "沙尘之锁",
                   "复仇猎手的死亡魔咒",
                   "复仇猎手的枯萎魔咒",
                   "穿刺者的尖啸",
                   "灵魂捕获者",
                   "回溯涡流",
                   "耶尔辛尼亚的不朽者魔眼",
                   "耶尔辛尼亚的死亡指南",
                   "耶尔辛尼亚的锯齿启示录",
                   "耶尔辛尼亚的奇异葬礼",
                   "耶尔辛尼亚的蒸馏瘟疫",
                   "白夜之暗",
                   "隔绝之暗",
                   "薄暮之暗",
                   "迫近之暗",
                   "忽视之暗",
                   "入侵之暗",
                   "深渊之暗",
                   "腐朽王朝",
                   "日食祭礼",
                   "召唤黑潮",
                   "堕落蔓延",
                   "噬神之秘",
                   "献祭权冠",
                   "腐疫微风",
                   "残毁之爪",
                   "死亡行者",
                   "血字古卷",
                   "云雀的哀歌",
                   "阿兰的绝笔",
                   "埃隆佐的理论",
                   "艾罗梅洛的实践",
                   "灰鸦的叹息",
                   "罗玛卡夫的阴谋",
                   "罗玛卡夫的知识",
                   "罗玛卡夫的权势",
                   "罗玛卡夫的傲慢",
                   "罗玛卡夫的指示",
                   "虚空灵魂",
                   "狂欢皇后",
                   "鬼魅魔术",
                   "苍白之灯",
                   "骨髓舞蹈",
                   "海尔曼的热质缩合",
                   "海尔曼的气热耦联",
                   "海尔曼的全新理论",
                   "海尔曼的绝热隔层",
                   "海尔曼的燃素聚焦",
                   "海尔曼的烈性分解",
                   "内芙妮的净慧之冠",
                   "内芙妮的穹光神甲",
                   "内芙妮的晨辉护手",
                   "内芙妮的星河之翼",
                   "内芙妮的龙舞之靴",
                   "大亡魂觉醒",
                   "灾难天降之任",
                   "死亡冠军之心",
                   "万物抹杀者",
                   "恐怖军团之主",
                   "伊斯塔里亚的神圣恩赐",
                   "伊斯塔里亚的光明回响",
                   "伊斯塔里亚的最终审判",
                   "伊斯塔里亚的元素庇护",
                   "伊斯塔里亚的战斗裁决",
                   "相遇",
                   "胜利之枪",
                   "离别",
                   "仿圣盾，天佑之墙",
                   "艾拉蓓尔的刚柔之道",
                   "艾拉蓓尔的武仪之美",
                   "艾拉蓓尔的先锋之刃",
                   "艾拉蓓尔的秘传之叶",
                   "艾拉蓓尔的破空姿态",
                   "艾拉蓓尔的守护之心",
                   "萨玛伊的终结之杖",
                   "远古雷神意志",
                   "远古雷神领域",
                   "远古雷神之力",
                   "远古雷神之靴",
                   "远古雷神之戒",
                   "努努莫拉的人蛛睑",
                   "努努莫拉的寄子螟",
                   "努努莫拉的虫丝疹",
                   "努努莫拉的绦骸虫",
                   "努努莫拉的蛆虫袋",
                   "塔提雅莎的战争",
                   "塔提雅莎的征服",
                   "塔提雅莎的饥荒",
                   "塔提雅莎的苦难",
                   "塔提雅莎的瘟疫",
                   "晦暗天轮",
                   "密稀祈愿灵",
                   "无形魔手",
                   "复苏之书",
                   "夜魔戒",
                   "擢星落光之权",
                   "定星分宫之眼",
                   "移星换位之筹",
                   "正星逆行之轨",
                   "璀璨天穹星盘",
                   "异域中的时空之域",
                   "异域中的风灵领域",
                   "异域中的魔域",
                   "异域中的守护之域",
                   "异域中的元素领域",
                   "异度空间的紫色结晶",
                   "虚空枪骑士头盔",
                   "虚空枪骑士铠甲",
                   "虚空枪骑士披风",
                   "虚空枪骑士护手",
                   "虚空枪骑士护腿",
                   "虚空结晶",
                   "虚空印记（元素转换）",
                   "虚空印记（力量转换）",
                   "虚空印记（自然转换）",
                   "虚空印记（混沌冰晶）",
                   "虚空印记（炎魔冰晶）",
                   "虚空印记（雷刃冰晶）",
                   "虚空印记（生命精髓）",
                   "虚空印记（罗西伊斯之力）",
                   "愚者（逆位）",
                   "I：魔术师（逆位）",
                   "II：女祭司（逆位）",
                   "III：皇后（逆位）",
                   "IV：皇帝（逆位）",
                   "V：教皇（逆位）",
                   "VI：恋人（逆位）",
                   "VII：战车（逆位）",
                   "VIII：力量（逆位）",
                   "IX：隐者（逆位）",
                   "X：命运之轮（逆位）",
                   "XI：逆义（逆位）",
                   "XII：倒吊者（逆位）",
                   "XIII：死神（逆位）",
                   "XIV：节制（逆位）",
                   "XV：恶魔（逆位）",
                   "XVI：塔（逆位）",
                   "XVII：星星（逆位）",
                   "XVIII：月亮（逆位）",
                   "XIX：太阳（逆位）",
                   "XX：审判（逆位）",
                   "XXI：世界（逆位）",
                   "艾瑞娜的预知项链",
                   "艾瑞娜的星币腰带",
                   "艾瑞娜的圣杯披风",
                   "艾瑞娜的权杖手环",
                   "艾瑞娜的秘仪手套",
                   "艾瑞娜的宝剑护腿",
                   "费佳莉亚的绝望之呼",
                   "费佳莉娅的心碎之吟",
                   "费佳莉亚的苦楚之嚎",
                   "费佳莉亚的凄怆之啼",
                   "费佳莉亚的悔恨之叹",
                   "费佳莉亚的悲伤之咏",
                   "新绿海岸的宣告者",
                   "最后子午线的跨越者",
                   "埃克拉尔的奠基者",
                   "双子海图的绘制者",
                   "墓地列岛的践踏者",
                   "集群操纵",
                   "明晰长眠",
                   "灵魂捷径",
                   "阴冷蓝调",
                   "幻觉倾盆",
                   "伞剑客的谨言之行",
                   "伞剑客的明朗之行",
                   "对影",
                   "雾雨",
                   "伞剑客的刺探之行",
                   "伞剑客的迅捷之行"];
    let currentSetlist = setlist.concat();
    var treasureItems;

    // draw heart ////////////////////////////////////////////////////////////

    function twoTriangleUp(height) {
        for (let i = 0; i < height; i++) {
            for (let j = height - i; j > 0; j--) {
                document.getElementById("codeArea").value += ("—");
            }
            for (let k = 1; k < i * 2 + 1; k++) {
                document.getElementById("codeArea").value += ("＊");
            }
            for (let j = height - i; j > 0; j--) {
                document.getElementById("codeArea").value += ("——");
            }
            for (let k = 1; k < i * 2 + 1; k++) {
                document.getElementById("codeArea").value += ("＊");
            }
            document.getElementById("codeArea").value += ("\n");
        }
    }

    function downTriangle(height, love){
        for (let i = 0; i < height*2; i++) {
            for (let j = 0; j < i-0.9; j=j+0.9) {
                document.getElementById("codeArea").value += ("—");
            }
            for (let k = height*4-(i*2-1); k > 2; k--) {
                document.getElementById("codeArea").value += ("＊");
            }
            document.getElementById("codeArea").value += ("\n");
            if(i == 1){document.getElementById("codeArea").value += ("—＊＊＊＊＊＊好感度"+love+"%＊＊＊＊＊\n");}
        }
    }

    function drawHeart(height, love){
        codeArea.value = '';
        twoTriangleUp(height);
        downTriangle(height,love);
    }

    // wrap string //////////////////////////////////////////////////////////////

    if (String.prototype.splice === undefined) {
        /**
         * Splices text within a string.
         * @param {int} offset The position to insert the text at (before)
         * @param {string} text The text to insert
         * @param {int} [removeCount=0] An optional number of characters to overwrite
         * @returns {string} A modified string containing the spliced text.
         */
        String.prototype.splice = function(offset, text, removeCount=0) {
            let calculatedOffset = offset < 0 ? this.length + offset : offset;
            return this.substring(0, calculatedOffset) +
                text + this.substring(calculatedOffset + removeCount);
        };
    }

    function wrapStr(str, length) {
        for (var i=1; i<(str.length/length); i++){
            str = str.splice(i*length, "\n");
        }
        return str;
    }

    // generate compressed item string //////////////////////////////////////////
    // Todo: init currentSetlist as [0,0,0,0,0,...0]. If list equals setlist,
    // currentSetlist++.
    function getSetlistString(list){
        var bbTreasureSetlist=[];
        for (var i=0;i<currentSetlist.length;i++) {
            for (var j=0;j<list.length;j++) {
                if (list[j]==currentSetlist[i]){
                    bbTreasureSetlist.push("[item:"+currentSetlist[i]+"]");
                    currentSetlist[i]=1;
                }
            }
            if(currentSetlist[i]!=1){
                currentSetlist[i]=0;
            }
        }
        //console.log(currentSetlist);
        return bbTreasureSetlist.join("\n");
    }

    // get treasure itemlist //////////////////////////////////////////////////

    function getList(rawList){
        const regex = /\[\s*([^:]+?)\s*:\s*/gm;
        const regex1 = /\].*/gm;
        rawList = rawList.replace(regex, '');
        rawList = rawList.replace(regex1, '');
        //console.log(rawList);
        return rawList.trim().split("\n");
    }

    // load button function /////////////////////////////////////////////////////

    window.loadTreasure = function (){
        $("#listDiv").load(bbcodeA.getAttribute("href")+" pre", function getTreasureItems(){
            var itemlist;
            itemlist = document.getElementById("listDiv").firstChild.innerText;
            treasureItems = getList(itemlist);
            //console.log(itemlist);
            getSetlistString(treasureItems);

            var strSetlist = currentSetlist.join("");
            //console.log(strSetlist);
            var compSetlist = binaryToHex(strSetlist);
            //console.log(compSetlist.result);
            var groupName = document.querySelector("#main_content input[name='gruppe_name']").value;
            var heroName = document.querySelector("#main_content input[name='heldenname']").value;
            var cellarName = document.querySelector("#main_content input[name='view']").value;
            if (cellarName == "groupcellar"){cellarName = "宝库"};
            if (cellarName == "groupcellar_2") {cellarName = "团队仓库"};
            if (cellarName == "") {cellarName = "仓库"};
            if (cellarName == "cellar") {cellarName = "贮藏室"};
            codeArea.value = "#[group:" + groupName + "] - [hero:" + heroName + "]的" + cellarName + "\n" + wrapStr(compSetlist.result, 60);
        });
    }

    // decode function //////////////////////////////////////////////////////////

    function tidySharecode (code){
        code = code.replace(/#.*\n/gm,"");
        code = code.replace(/\n/gm, "");
        return code;
    }

    function binToBB (binCode) {
        var itemlist = binCode.split("");
        //console.log(itemlist.length);
        for(var i=0;i<itemlist.length;i++){
            if(itemlist[i] == 1){
                itemlist[i]="[item:" + setlist[i] + "]";
            }
        }
        var decodedSetlist = itemlist.join("\n");
        decodedSetlist = decodedSetlist.replace(/0\n/gm,"");
        decodedSetlist = decodedSetlist.replace(/\n0/gm,"");
        //console.log(decodedSetlist);
        return (decodedSetlist);
    }

    window.decodeSetCode = function () {
        var hexSetCode = document.getElementById("codeArea").value;
        hexSetCode = tidySharecode(hexSetCode);
        var binSetCode = hexToBinary(hexSetCode);
        //console.log(Number(binSetCode.result));
        if(Number(binSetCode.result)){document.getElementById("codeArea").value = binToBB(binSetCode.result);}else{codeArea.value = "这个套装码是空的，建议乞讨！"};
    }

    // calc button function ////////////////////////////////////////////////////
    window.calcLove = function() {
        if (codeArea.value =="" || codeArea.value =="宝库1代码...\n\n1. 点击“获取代码”，即可在左侧输入框获得当前宝库代码\n\n2. 在左侧输入框输入别人分享的代码，点击“解析代码”，即可获得对方宝库套装列表\n\n3. 在右侧输入框输入对方分享的宝库码（保持左侧为原有提示语，或者为空），点击“计算好感度”，可以计算对方和你当前宝库的好感\n\n4. 在左右两侧分别输入双方宝库码，即可计算这两个宝库的好感"){
            $("#listDiv").load(bbcodeA.getAttribute("href")+" pre", function getTreasureCodes(){
                var itemlist;
                itemlist = document.getElementById("listDiv").firstChild.innerText;
                treasureItems = getList(itemlist);
                //console.log(itemlist);
                getSetlistString(treasureItems);
                var strSetlistBin = currentSetlist.join("");
                //console.log(strSetlistBin);
                var targetTreasureHex = codeArea_2.value;
                targetTreasureHex = tidySharecode(targetTreasureHex);
                var strTargetTreasureBin = hexToBinary(targetTreasureHex);
                //console.log(strTargetTreasureBin.result);
                var love = 100 * stringSimilarity.compareTwoStrings(strSetlistBin, strTargetTreasureBin.result);
                drawHeart(5, love.toFixed(1));
            });
        } else {
            var treasureHex = tidySharecode(codeArea.value);
            var strTreasureBin = hexToBinary(treasureHex);
            var targetTreasureHex = tidySharecode(codeArea_2.value);
            var strTargetTreasureBin = hexToBinary(targetTreasureHex);
            var love = 100 * stringSimilarity.compareTwoStrings(strTreasureBin.result, strTargetTreasureBin.result);
            drawHeart(5, love.toFixed(1));
        }
    }

    // clear button function ///////////////////////////////////////////////////

    window.clearCodeArea = function () {
        codeArea.value = "";
        codeArea_2.value = "";
    }

    // front-end manipulation //////////////////////////////////////////////////

    if(/\/wod\/spiel\/hero\/items.php.*/.test(document.URL)){
        // if (document.querySelector("#main_content input[name='view']").value == "groupcellar"){
        // add output button //////////////////////////////////////
        var bbcodeA = document.querySelector("form div[class='layout_right'] a");
        var outputTreasureSet = document.createElement("a");
        outputTreasureSet.setAttribute("onclick", bbcodeA.getAttribute("onclick").replace("&IS_POPUP=1","&IS_POPUP=1&treasurecode=1"));
        outputTreasureSet.setAttribute("href",bbcodeA.getAttribute("href").replace("&IS_POPUP=1","&IS_POPUP=1&treasurecode=1"));
        outputTreasureSet.setAttribute("target","_blank");
        outputTreasureSet.innerHTML = " 套装列表";
        bbcodeA.parentElement.appendChild(outputTreasureSet);

        // add list holding div //////////////////////////////////
        var mainContent = document.getElementById("main_content");
        var listDiv = document.createElement("div");
        listDiv.style="display: none;"
        listDiv.id="listDiv";
        mainContent.firstChild.nextSibling.appendChild(listDiv);

        // add code output textarea /////////////////////////////
        var treasureLoveDiv = document.createElement("div");
        treasureLoveDiv.id = "treasureLove";
        mainContent.firstChild.nextSibling.appendChild(treasureLoveDiv);

        var codeArea = document.createElement("textarea");
        codeArea.id = "codeArea";
        codeArea.value = "宝库1代码...\n\n1. 点击“获取代码”，即可在左侧输入框获得当前宝库代码\n\n2. 在左侧输入框输入别人分享的代码，点击“解析代码”，即可获得对方宝库套装列表\n\n3. 在右侧输入框输入对方分享的宝库码（保持左侧为原有提示语，或者为空），点击“计算好感度”，可以计算对方和你当前宝库的好感\n\n4. 在左右两侧分别输入双方宝库码，即可计算这两个宝库的好感";
        codeArea.style = "width: 45%; height: 200px; padding:10px; margin: 5px; line-height: 1em; font-family: 'Times New Roman', 'Liberation Serif', Roboto, SimHei, 'Wenquanyi Micro Hei', monospace;";
        var codeArea_2 = document.createElement("textarea");
        codeArea_2.id = "codeArea_2";
        codeArea_2.value = "宝库2代码...";
        codeArea_2.style = "width: 45%; height: 200px; padding:10px; margin: 5px; line-height: 1em; font-family: 'Times New Roman', 'Liberation Serif', Roboto, SimHei, 'Wenquanyi Micro Hei', monospace;";
        var codeAreaBr = document.createElement("br");
        var codeAreaHr = document.createElement("hr");

        var getListButton = document.createElement("input");
        getListButton.type = ("submit");
        getListButton.style = ("margin: 0 0 0 5px;");
        getListButton.setAttribute("class", "button clickable");
        getListButton.setAttribute("onclick", "loadTreasure();");
        getListButton.value = "获取代码";
        var decodeListButton = document.createElement("input");
        decodeListButton.type = ("submit");
        decodeListButton.style = ("margin: 0 0 0 5px;");
        decodeListButton.setAttribute("class", "button clickable");
        decodeListButton.setAttribute("onclick", "decodeSetCode();");
        decodeListButton.value = "解析代码";
        var calcButton = document.createElement("input");
        calcButton.type = ("submit");
        calcButton.style = ("margin: 0 0 0 5px;");
        calcButton.setAttribute("class", "button clickable");
        calcButton.setAttribute("onclick", "calcLove();");
        calcButton.value = "计算好感度";
        var rmButton = document.createElement("input");
        rmButton.type = ("submit");
        rmButton.style = ("margin: 0 0 0 5px;");
        rmButton.setAttribute("class", "button clickable");
        rmButton.setAttribute("onclick", "clearCodeArea();");
        rmButton.value = "清空";
        treasureLoveDiv.appendChild(codeAreaHr);
        treasureLoveDiv.appendChild(codeArea);
        treasureLoveDiv.appendChild(codeArea_2);
        treasureLoveDiv.appendChild(codeAreaBr);
        treasureLoveDiv.appendChild(getListButton);
        treasureLoveDiv.appendChild(decodeListButton);
        treasureLoveDiv.appendChild(calcButton);
        treasureLoveDiv.appendChild(rmButton);
        //    }
    }

    // output cellar /////////////////////////////////////////////////////

   if (/\/wod\/spiel\/hero\/itemlinklist.php?.*&treasurecode=1/.test(document.URL)) {
        var itemlist = document.getElementsByTagName("pre")[0].innerText;
        console.log(itemlist);
        treasureItems = getList(itemlist);
        console.log(treasureItems);
        document.getElementsByTagName("pre")[0].innerHTML = getSetlistString(treasureItems);
    }
})();